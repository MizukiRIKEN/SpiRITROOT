#!/bin/bash

if [ -z "$1" ]
then
  echo ""
  echo " >> Please provide username as the first argument!"
  echo ""

  exit
fi

source @CMAKE_BINARY_DIR@/config.sh
TARGET="$HOME/SpiRITROOT_HOME/$1"
if [ -f "$TARGET/.SpiRITROOT_copied" ]
then
  echo ""
  echo " >> Environmental variables loaded!"
  echo " >> Directory changed for $1!"
  echo ""
  cd $TARGET
else
  mkdir -p $TARGET
  touch $TARGET/.SpiRITROOT_copied
  if [ $HOSTNAME == "ribfana02.riken.jp" ]
  then
    ln -s ~/Common/data $TARGET/data  # only for RIBFANA02
  fi
  ln -s @SPIRITDIR@/geometry $TARGET/geometry
  ln -s @SPIRITDIR@/parameters $TARGET/parameters
  cp @SPIRITDIR@/user_macro/* $TARGET
  echo ""
  echo " >> Initialization for $1!"
  echo " >> Environmental variables loaded!"
  echo " >> Directory changed for $1!"
  echo ""
  cd $TARGET
fi

unset TARGET
